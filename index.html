<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Healthcare Customer Service Training Suite</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 30px;
    }
    h1, h2 {
      text-align: center;
      color: #2c3e50;
    }
    nav {
      text-align: center;
      margin-bottom: 30px;
    }
    nav a {
      margin: 0 10px;
      padding: 5px 0; /* Added padding for border */
      text-decoration: none;
      color: #3498db;
      font-weight: bold;
      transition: color 0.3s, border-bottom 0.3s;
    }
    
    /* FEATURE: Tab Highlighting */
    .active-nav {
      color: #2980b9 !important;
      border-bottom: 3px solid #3498db;
    }
    
    section {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 900px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-bottom: 40px;
    }
    /* FEATURE: Section Switching */
    .hidden-section {
        display: none;
    }
    
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      margin-top: 20px;
      padding: 10px 15px;
      background: #2ecc71;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #27ae60;
    }

    /* Quiz specific styles */
    .quiz-question-box {
        border: 1px solid #ddd;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 4px;
    }
    .quiz-answer-btn {
        display: block;
        width: 100%;
        margin-top: 10px;
        background: #ecf0f1;
        color: #2c3e50;
        text-align: left;
    }
    .quiz-answer-btn:hover {
        background: #bdc3c7;
    }
    .correct { background-color: #d4edda !important; border: 1px solid #c3e6cb; }
    .incorrect { background-color: #f8d7da !important; border: 1px solid #f5c6cb; }
  </style>
</head>
<body>

<h1>Healthcare Customer Service Training Suite</h1>

<nav>
  <a href="#cms1500" class="active-nav">CMS-1500 Form</a>
  <a href="#ub04">UB-04 Form</a>
  <a href="#hipaa">HIPAA Consent</a>
  <a href="#quiz">Scenario Quiz</a>
  <a href="#dashboard">Dashboard</a>
</nav>

<section id="cms1500">
  <h2>CMS-1500 Claim Form</h2>
  <form id="cmsForm">
    <label for="cmsPolicy">Patient Policy Number</label>
    <input type="text" id="cmsPolicy" required>
    
    <label for="cmsDiagnosis">Box 21: Primary Diagnosis (ICD-10)</label>
    <input type="text" id="cmsDiagnosis" placeholder="e.g., M54.5" required>
    
    <label for="cmsCPT">Box 24D: Procedure Code (CPT/HCPCS)</label>
    <input type="text" id="cmsCPT" placeholder="e.g., 99213" required>
    
    <label for="cmsDate">Box 24A: Date of Service</label>
    <input type="date" id="cmsDate" required>
    
    <button type="submit">Submit CMS Claim</button>
  </form>
</section>

<section id="ub04" class="hidden-section">
  <h2>UB-04 Claim Form</h2>
  <form id="ubForm">
    <label for="ubType">Box 4: Type of Bill (TOB)</label>
    <input type="text" id="ubType" placeholder="e.g., 111 (Inpatient/First Claim)" required>
    
    <label for="ubRevenue">Box 42: Revenue Code</label>
    <input type="text" id="ubRevenue" placeholder="e.g., 0450 (Emergency Room)" required>
    
    <label for="ubAdmission">Box 12: Admission Date</label>
    <input type="date" id="ubAdmission" required>
    
    <label for="ubPrincipal">Box 66: Principal Diagnosis</label>
    <input type="text" id="ubPrincipal" placeholder="e.g., I10 (Hypertension)" required>
    
    <button type="submit">Submit UB-04 Claim</button>
  </form>
</section>

<section id="hipaa" class="hidden-section">
  <h2>HIPAA Consent Form</h2>
  <form id="hipaaForm">
    <p>By checking the box below, you confirm that you have read and understood the privacy practices regarding the use and disclosure of Protected Health Information (PHI).</p>
    
    <label for="hipaaName">Patient Full Name</label>
    <input type="text" id="hipaaName" required>
    
    <label>
      <input type="checkbox" id="hipaaAgree" style="width: auto;">
      I agree to the terms of the HIPAA Notice of Privacy Practices.
    </label>
    
    <button type="submit">Confirm Consent</button>
  </form>
</section>

<section id="quiz" class="hidden-section">
  <h2>Scenario-Based Quiz</h2>
  <div id="quizContainer">
    </div>
  <p id="quizFeedback" style="text-align: center; font-weight: bold; margin-top: 15px;"></p>
  <button id="nextQuestionBtn" style="display: none; width: 100%;" class="quiz-answer-btn">Next Question</button>
  <button id="startQuizBtn" style="width: 100%;">Start Quiz</button>
</section>

<section id="dashboard" class="hidden-section">
  <h2>Patient Workflow Dashboard</h2>
  <form id="statusForm">
    <label for="dashName">Patient Name</label>
    <input type="text" id="dashName" required>
    <label for="dashStatus">Status</label>
    <select id="dashStatus" required>
      <option value="">--Select--</option>
      <option value="Checked In">Checked In</option>
      <option value="Vitals Taken">Vitals Taken</option>
      <option value="Ready for Provider">Ready for Provider</option>
      <option value="Billing Complete">Billing Complete</option>
    </select>
    <button type="submit">Update Status</button>
  </form>
  <h3>Activity Log</h3>
  <div id="statusLog" style="max-height: 200px; overflow-y: auto; background: #f9f9f9; padding: 10px; border-radius: 4px;">
    <p>System Initialized.</p>
  </div>
</section>

<script>
    // --- Quiz Data ---
    const quizQuestions = [
        {
            question: "A patient calls asking why their doctor bill is lower than the total charge. The EOB shows **CO-45**.",
            options: [
                "CO-45 means it's a deductible, so bill the patient the difference.",
                "CO-45 means **Contractual Obligation**; the difference is a non-billable discount.",
                "CO-45 means the service was denied for lack of information.",
            ],
            answer: "CO-45 means **Contractual Obligation**; the difference is a non-billable discount.",
            explanation: "CO (Contractual Obligation) indicates a write-off based on the provider's contract. The patient is *not* responsible for this amount."
        },
        {
            question: "Which form is correctly used for an **inpatient hospital admission**?",
            options: [
                "CMS-1500",
                "UB-04",
                "HIPAA Consent Form",
            ],
            answer: "UB-04",
            explanation: "The **UB-04** is for institutional claims (hospitals, nursing facilities). The CMS-1500 is for professional (physician) claims."
        }
    ];

    // --- Quiz State Variables ---
    let currentQuestionIndex = 0;
    let score = 0;
    const quizContainer = document.getElementById('quizContainer');
    const quizFeedback = document.getElementById('quizFeedback');
    const nextQuestionBtn = document.getElementById('nextQuestionBtn');
    const startQuizBtn = document.getElementById('startQuizBtn');


    // --- CORE FUNCTIONALITY: Section Switching (FIXED) ---
    
    const navLinks = document.querySelectorAll('nav a');
    const sections = document.querySelectorAll('section');

    function switchSection(targetId) {
        // 1. Hide all sections and remove active class from all links
        sections.forEach(section => {
            section.classList.add('hidden-section');
        });
        navLinks.forEach(link => {
            link.classList.remove('active-nav');
        });

        // 2. Show the target section
        const targetSection = document.getElementById(targetId);
        if (targetSection) {
            targetSection.classList.remove('hidden-section');
        }

        // 3. Highlight the active link in the navigation
        const targetLink = document.querySelector(`nav a[href="#${targetId}"]`);
        if (targetLink) {
            targetLink.classList.add('active-nav');
        }

        // 4. Reset quiz state if navigating away
        if (targetId !== 'quiz') {
            resetQuiz();
        }
    }

    // Attach event listeners to all navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault(); // Stop the default jump behavior
            
            // The target ID is the part of the link after the '#'
            const targetId = this.getAttribute('href').substring(1); 
            switchSection(targetId);
        });
    });

    // --- Quiz Functions ---

    function resetQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        quizFeedback.textContent = '';
        nextQuestionBtn.style.display = 'none';
        startQuizBtn.style.display = 'block';
        quizContainer.innerHTML = '';
        loadQuestion(); // Display the "Start Quiz" state
    }

    function loadQuestion() {
        if (currentQuestionIndex >= quizQuestions.length) {
            // Quiz Complete State
            quizContainer.innerHTML = `<p style="text-align: center;">Quiz finished! You scored **${score} out of ${quizQuestions.length}**.</p>`;
            quizFeedback.textContent = 'Great Job!';
            nextQuestionBtn.textContent = 'Start Over';
            nextQuestionBtn.style.display = 'block';
            startQuizBtn.style.display = 'none';
            return;
        }

        const q = quizQuestions[currentQuestionIndex];
        let questionHTML = `<div class="quiz-question-box">`;
        questionHTML += `<p><strong>Question ${currentQuestionIndex + 1}:</strong> ${q.question}</p>`;
        
        q.options.forEach(option => {
            questionHTML += `<button class="quiz-answer-btn" data-answer="${option}">${option}</button>`;
        });
        questionHTML += `</div>`;
        
        quizContainer.innerHTML = questionHTML;
        quizFeedback.textContent = '';
        nextQuestionBtn.style.display = 'none';
        
        // Attach listeners to the new buttons
        document.querySelectorAll('.quiz-answer-btn').forEach(btn => {
            btn.addEventListener('click', checkAnswer);
        });
    }

    function checkAnswer(event) {
        const selectedBtn = event.target;
        const selectedAnswer = selectedBtn.getAttribute('data-answer');
        const currentQuestion = quizQuestions[currentQuestionIndex];

        // Disable all buttons for this question
        document.querySelectorAll('.quiz-answer-btn').forEach(btn => {
            btn.disabled = true;
            btn.style.opacity = 0.7;
        });

        if (selectedAnswer === currentQuestion.answer) {
            score++;
            selectedBtn.classList.add('correct');
            quizFeedback.innerHTML = '<span style="color: green;">✅ Correct!</span>';
        } else {
            selectedBtn.classList.add('incorrect');
            // Highlight the correct answer
            document.querySelectorAll('.quiz-answer-btn').forEach(btn => {
                if (btn.getAttribute('data-answer') === currentQuestion.answer) {
                    btn.classList.add('correct');
                }
            });
            quizFeedback.innerHTML = `<span style="color: red;">❌ Incorrect.</span><br> Explanation: ${currentQuestion.explanation}`;
        }
        
        nextQuestionBtn.textContent = currentQuestionIndex < quizQuestions.length - 1 ? 'Next Question' : 'View Results';
        nextQuestionBtn.style.display = 'block';
    }
    
    function handleNextQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }
    
    // Quiz Event Listeners
    startQuizBtn.addEventListener('click', function() {
        startQuizBtn.style.display = 'none';
        currentQuestionIndex = 0;
        score = 0;
        loadQuestion();
    });
    nextQuestionBtn.addEventListener('click', handleNextQuestion);
    


    // --- Form Submission Handlers ---

    // CMS-1500
    document.getElementById("cmsForm").addEventListener("submit", function(e) {
        e.preventDefault();
        alert("✅ CMS-1500 Claim Submitted!");
        this.reset();
    });

    // UB-04
    document.getElementById("ubForm").addEventListener("submit", function(e) {
        e.preventDefault();
        alert("✅ UB-04 Claim Submitted!");
        this.reset();
    });

    // HIPAA
    document.getElementById("hipaaForm").addEventListener("submit", function(e) {
        e.preventDefault();
        if (!document.getElementById("hipaaAgree").checked) {
            alert("⚠️ Please acknowledge HIPAA compliance.");
            return;
        }
        alert("✅ HIPAA Consent Confirmed!");
        this.reset();
    });

    // Dashboard Status Update
    document.getElementById("statusForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const patient = document.getElementById('dashName').value;
        const status = document.getElementById('dashStatus').value;
        const log = document.getElementById('statusLog');
        
        if (!patient || !status) {
            alert("Please enter a patient name and select a status.");
            return;
        }

        const newEntry = document.createElement('p');
        newEntry.innerHTML = `<span style="color: ${status === 'Billing Complete' ? 'green' : '#3498db'}; font-weight: bold;">[${new Date().toLocaleTimeString()}]</span> ${patient}: Status updated to **${status}**.`;
        log.prepend(newEntry);
        
        this.reset();
        document.getElementById('dashName').focus();
    });

    // --- INITIALIZATION ---
    // Set the first section as active on page load
    const initialTargetId = window.location.hash ? window.location.hash.substring(1) : 'cms1500';
    switchSection(initialTargetId);
    resetQuiz(); // Initialize the quiz state
</script>

</body>
</html>
